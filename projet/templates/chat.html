<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Espace - MaliPress</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body style="background-color: #f4f7f6; font-family: Arial, sans-serif; padding: 20px;">

    <div style="max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h2 style="color: #008137; text-align: center;">ðŸ‡²ðŸ‡± Bienvenue, {{ session['user_id'] }}</h2>
        <div style="text-align: center; margin-bottom: 20px;">
            <a href="/logout" style="color: #d9534f; text-decoration: none; font-weight: bold;">Se dÃ©connecter</a> | 
            <a href="/" style="color: #5bc0de; text-decoration: none; font-weight: bold;">Retour Ã  l'accueil</a>
        </div>

        <hr>

        <section style="margin-top: 20px;">
            <h3 style="color: #333;">ðŸ’¬ Envoyer un message</h3>
            <form action="/envoyer" method="POST">
                <label for="destinataire">Ã€ qui voulez-vous Ã©crire ?</label>
                <select name="destinataire" required style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc;">
                    <option value="">-- Choisir un prestataire --</option>
                    {% for p in prestataires %}
                        <option value="{{ p['nom'] }}">{{ p['nom'] }} ({{ p['service'] }})</option>
                    {% endfor %}
                </select>

                <textarea name="message" placeholder="Votre message ici..." required style="width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ccc;"></textarea>
                
                <button type="submit" style="width: 100%; background-color: #008137; color: white; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 10px;">
                    Envoyer le message
                </button>
            </form>
        </section>

        <hr style="margin: 30px 0;">

        <section>
            <h3 style="color: #333;">ðŸ“© Mes messages reÃ§us</h3>
            {% if messages %}
                {% for m in messages %}
                    <div style="background: #e9f5ee; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid #008137;">
                        <strong style="color: #008137;">De : {{ m['expediteur'] }}</strong>
                        <p style="margin: 5px 0; color: #444;">{{ m['contenu'] }}</p>
                        <small style="color: #888;">ReÃ§u le : {{ m['date'] }}</small>
                    </div>
                {% endfor %}
            {% else %}
                <p style="text-align: center; color: #888; font-style: italic;">Vous n'avez pas encore de messages.</p>
            {% endif %}
        </section>
    </div>

</body>
</html>
